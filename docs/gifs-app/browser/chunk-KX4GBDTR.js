import{b as V}from"./chunk-UPC7OJ6N.js";import{$ as T,Fa as C,Ha as g,Ia as f,Ja as w,K as v,Ka as c,La as s,Ma as y,Na as D,O as p,Oa as R,Sa as E,T as u,Ta as I,U as S,fb as P,la as _,na as l,va as h}from"./chunk-AD3DCVMP.js";var a=class i{trendingScrollState=T(0);static \u0275fac=function(e){return new(e||i)};static \u0275prov=v({token:i,factory:i.\u0275fac,providedIn:"root"})};var F=["groupDivRef"],j=(i,t)=>t.id;function x(i,t){if(i&1&&(c(0,"div"),y(1,"img",3),s()),i&2){let e=t.$implicit;l(),w("src",e.url,_)("alt",e.title)}}function G(i,t){if(i&1&&(c(0,"div",2),g(1,x,2,2,"div",null,j),s()),i&2){let e=t.$implicit;l(),f(e)}}var d=class i{gifService=p(V);scrollService=p(a);ngAfterViewInit(){let t=this.scrollDivRef()?.nativeElement;t&&(t.scrollTop=this.scrollService.trendingScrollState())}scrollDivRef=P("groupDivRef");onScroll(t){let e=this.scrollDivRef()?.nativeElement;if(!e)return;let n=e.scrollTop,r=e.clientHeight,b=e.clientWidth,o=e.scrollHeight;console.log({scrollTop:n,clientHeight:r,scrollHeight:o});let m=n+r+300>=o;this.scrollService.trendingScrollState.set(n),console.log({isAtBottom:m}),m&&this.gifService.loadTrendingGifs()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=h({type:i,selectors:[["app-trending-page"]],viewQuery:function(e,n){e&1&&E(n.scrollDivRef,F,5),e&2&&I()},decls:4,vars:0,consts:[["groupDivRef",""],[1,"h-screen","overflow-y-scroll","grid","grid-cols-2","md:grid-cols-4","gap-4","pt-6",3,"scroll"],[1,"grid","gap-4"],[1,"h-full","max-w-full","rounded-lg","object-contain",3,"src","alt"]],template:function(e,n){if(e&1){let r=D();c(0,"div",1,0),R("scroll",function(o){return u(r),S(n.onScroll(o))}),g(2,G,3,0,"div",2,C),s()}e&2&&(l(2),f(n.gifService.trendingGifGroup()))},encapsulation:2})};export{d as default};
