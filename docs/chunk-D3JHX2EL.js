import{$ as o,$a as a,I as f,K as m,O as g,a as p,ab as y,b as c,ib as h,p as n}from"./chunk-ZCDM4FIP.js";var r={producion:!0,companyName:"Gifs",companyName2:".1",companySlogan:"Manejas tus Gifs",giphyApiKey:"3DvT7yNek36Qdn7erYlnHjQrXPUkbk8w",giphyUrl:"https://api.giphy.com/v1"};var s=class{static myGiphyItemToGif(i){return{id:i.id,title:i.title,url:i.images.original.url}}static myGiphyItemsToGifArray(i){return i.map(this.myGiphyItemToGif)}};var d="gifs",u=()=>{let e=localStorage.getItem(d)??"{}",i=JSON.parse(e);return console.log(i),i},l=class e{http=g(h);trendingGifs=o([]);trendingGifsLoading=o(!0);trendingGifGroup=a(()=>{let i=[];for(let t=0;t<this.trendingGifs().length;t+=3)i.push(this.trendingGifs().slice(t,t+3));return console.log(i),i});searchHistory=o(u());searchHistoryKeys=a(()=>Object.keys(this.searchHistory()));constructor(){this.loadTrendingGifs(),console.log("Servicio creado")}saveGifsToLocalStorage=y(()=>{let i=JSON.stringify(this.searchHistory());localStorage.setItem("GIF_KEY",i)});loadTrendingGifs(){this.http.get(`${r.giphyUrl}/gifs/trending`,{params:{api_key:r.giphyApiKey,limit:50}}).subscribe(i=>{let t=s.myGiphyItemsToGifArray(i.data);this.trendingGifs.set(t),this.trendingGifsLoading.set(!1),console.log("Respuesta:",{gifs:t})})}searchGifs(i){return this.http.get(`${r.giphyUrl}/gifs/search`,{params:{api_key:r.giphyApiKey,limit:20,q:i}}).pipe(n(({data:t})=>t),n(t=>s.myGiphyItemsToGifArray(t)),f(t=>{this.searchHistory.update(G=>c(p({},G),{[i.toLowerCase()]:t}))}))}getHistoryGifs(i){return this.searchHistory()[i]??[]}static \u0275fac=function(t){return new(t||e)};static \u0275prov=m({token:e,factory:e.\u0275fac,providedIn:"root"})};export{r as a,l as b};
